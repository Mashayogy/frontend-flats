<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Flats Alerts Portugal</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="main-container">
        <!-- TABS -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('search')" data-i18n="tab_search">üîç –ü–æ–∏—Å–∫</button>
            <button class="tab-btn" onclick="switchTab('results')" data-i18n="tab_results">üè† –û–±—ä—è–≤–ª–µ–Ω–∏—è</button>
            <button class="tab-btn" onclick="switchTab('map')" data-i18n="tab_map">üó∫ –ö–∞—Ä—Ç–∞</button>
        </div>

        <!-- SEARCH TAB -->
        <div id="tab-search" class="tab-content active">
            <h2 data-i18n="title_search">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∏—Å–∫–∞</h2>

            <!-- 1. –¢–∏–ø –∂–∏–ª—å—è -->
            <div class="form-group">
                <label data-i18n="label_property_type">–¢–∏–ø –∂–∏–ª—å—è</label>
                <div class="pill-group" id="property-type">
                    <div class="pill" data-value="flat" onclick="togglePill(this, 'property-type')"
                        data-i18n="prop_flat">–ö–≤–∞—Ä—Ç–∏—Ä–∞</div>
                    <div class="pill" data-value="room" onclick="togglePill(this, 'property-type')"
                        data-i18n="prop_room">–ö–æ–º–Ω–∞—Ç–∞</div>
                    <div class="pill" data-value="house" onclick="togglePill(this, 'property-type')"
                        data-i18n="prop_house">–î–æ–º–∞ –∏ –∫–æ—Ç—Ç–µ–¥–∂–∏</div>
                    <div class="pill" data-value="penthouse_duplex" onclick="togglePill(this, 'property-type')"
                        data-i18n="prop_penthouse">–ü–µ–Ω—Ç—Ö–∞—É—Å—ã –∏ –î—É–ø–ª–µ–∫—Å—ã</div>
                </div>
            </div>

            <!-- 2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç -->
            <div class="form-group" id="group-rooms">
                <label data-i18n="label_rooms">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç</label>
                <div class="pill-group" id="rooms">
                    <div class="pill" data-value="T0" onclick="togglePill(this, 'rooms')" data-i18n="room_studio">–°—Ç—É–¥–∏—è
                    </div>
                    <div class="pill" data-value="T1" onclick="togglePill(this, 'rooms')">1</div>
                    <div class="pill" data-value="T2" onclick="togglePill(this, 'rooms')">2</div>
                    <div class="pill" data-value="T3" onclick="togglePill(this, 'rooms')">3</div>
                    <div class="pill" data-value="T4+" onclick="togglePill(this, 'rooms')">4+</div>
                </div>
            </div>

            <!-- 2.5 –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –≤ –∫–æ–º–Ω–∞—Ç–µ -->
            <div class="form-group" id="group-people-in-room" style="display: none;">
                <label data-i18n="label_people_in_room">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –≤ –∫–æ–º–Ω–∞—Ç–µ</label>
                <div class="pill-group" id="people-in-room">
                    <div class="pill" data-value="1" onclick="togglePill(this, 'people-in-room')">1</div>
                    <div class="pill" data-value="2" onclick="togglePill(this, 'people-in-room')">2</div>
                    <div class="pill" data-value="3" onclick="togglePill(this, 'people-in-room')">3</div>
                </div>
            </div>

            <!-- 3. –°–∞–Ω. —É–∑–ª—ã -->
            <div class="form-group">
                <label data-i18n="label_bathrooms">–°–∞–Ω. —É–∑–ª—ã</label>
                <div class="pill-group" id="bathrooms">
                    <div class="pill" data-value="1" onclick="togglePill(this, 'bathrooms')">1</div>
                    <div class="pill" data-value="2" onclick="togglePill(this, 'bathrooms')">2</div>
                    <div class="pill" data-value="3+" onclick="togglePill(this, 'bathrooms')">3+</div>
                </div>
            </div>



            <!-- 4. –¶–µ–Ω–∞ -->
            <div class="form-group">
                <label data-i18n="label_price">–¶–µ–Ω–∞ (‚Ç¨/–º–µ—Å)</label>
                <div class="range-inputs">
                    <input type="number" id="price-min" placeholder="–û—Ç" data-i18n="placeholder_from">
                    <input type="number" id="price-max" placeholder="–î–æ" data-i18n="placeholder_to">
                </div>
            </div>

            <!-- 5. –ü–ª–æ—â–∞–¥—å -->
            <div class="form-group">
                <label data-i18n="label_area">–ü–ª–æ—â–∞–¥—å (–º¬≤)</label>
                <div class="range-inputs">
                    <input type="number" id="area-min" placeholder="–û—Ç" data-i18n="placeholder_from">
                    <input type="number" id="area-max" placeholder="–î–æ" data-i18n="placeholder_to">
                </div>
            </div>

            <!-- 5.5 –ü–ª–æ—â–∞–¥—å —É—á–∞—Å—Ç–∫–∞ (hidden by default) -->
            <div class="form-group" id="group-plot-area" style="display: none;">
                <label data-i18n="label_plot_area">–ü–ª–æ—â–∞–¥—å —É—á–∞—Å—Ç–∫–∞ (–º¬≤)</label>
                <div class="range-inputs">
                    <input type="number" id="plot-area-min" placeholder="–û—Ç" data-i18n="placeholder_from">
                    <input type="number" id="plot-area-max" placeholder="–î–æ" data-i18n="placeholder_to">
                </div>
            </div>



            <!-- 6. –≠—Ç–∞–∂ -->
            <div class="form-group" id="group-floor">
                <label data-i18n="label_floor">–≠—Ç–∞–∂</label>
                <div class="range-inputs" style="margin-bottom: 8px;">
                    <input type="number" id="floor-min" placeholder="–û—Ç" data-i18n="placeholder_from">
                    <input type="number" id="floor-max" placeholder="–î–æ" data-i18n="placeholder_to">
                </div>
            </div>

            <!-- 7. –°–æ—Å—Ç–æ—è–Ω–∏–µ -->
            <div class="form-group">
                <label data-i18n="label_condition">–°–æ—Å—Ç–æ—è–Ω–∏–µ</label>
                <div class="pill-group" id="condition">
                    <div class="pill" data-value="new" onclick="togglePill(this, 'condition')" data-i18n="cond_new">
                        –ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∞</div>
                    <div class="pill" data-value="good" onclick="togglePill(this, 'condition')" data-i18n="cond_good">
                        –•–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</div>
                    <div class="pill" data-value="renovation" onclick="togglePill(this, 'condition')"
                        data-i18n="cond_renovation">–ù—É–∂–µ–Ω —Ä–µ–º–æ–Ω—Ç</div>
                </div>
            </div>



            <!-- 8. –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <div class="form-group">
                <label data-i18n="label_features">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</label>
                <div class="pill-group" id="features">
                    <div class="pill" data-value="furniture" onclick="togglePill(this, 'features')"
                        data-i18n="feat_furniture">–ú–µ–±–µ–ª—å</div>
                    <div class="pill" data-value="ac" onclick="togglePill(this, 'features')" data-i18n="feat_ac">
                        –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä</div>
                    <div class="pill" data-value="lift" onclick="togglePill(this, 'features')" data-i18n="feat_lift">
                        –õ–∏—Ñ—Ç</div>
                    <div class="pill" data-value="garage" onclick="togglePill(this, 'features')"
                        data-i18n="feat_garage">–ì–∞—Ä–∞–∂</div>
                    <div class="pill" data-value="garden" onclick="togglePill(this, 'features')"
                        data-i18n="feat_garden">–°–∞–¥</div>
                    <div class="pill" data-value="pool" onclick="togglePill(this, 'features')" data-i18n="feat_pool">
                        –ë–∞—Å—Å–µ–π–Ω</div>
                    <div class="pill" data-value="balcony" onclick="togglePill(this, 'features')"
                        data-i18n="feat_balcony">–ë–∞–ª–∫–æ–Ω</div>
                    <div class="pill" data-value="terrace" onclick="togglePill(this, 'features')"
                        data-i18n="feat_terrace">–¢–µ—Ä—Ä–∞—Å–∞</div>
                </div>
            </div>

            <!-- 9. –ö–æ–º–∏—Å—Å–∏—è -->
            <div class="form-group">
                <label data-i18n="label_commission">–ö–æ–º–∏—Å—Å–∏—è –∞–≥–µ–Ω—Ç–∞</label>
                <label class="toggle-switch">
                    <input type="checkbox" id="no-commission">
                    <span class="slider"></span>
                    <span class="label-text" data-i18n="commission_no">–ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏</span>
                </label>
            </div>



            <!-- 10. –ö—Ç–æ –±—É–¥–µ—Ç –∂–∏—Ç—å -->
            <div class="form-group">
                <label data-i18n="label_occupancy">–ö—Ç–æ –±—É–¥–µ—Ç –∂–∏—Ç—å</label>
                <div class="pill-group" id="rules">
                    <div class="pill" data-value="kids" onclick="togglePill(this, 'rules')" data-i18n="rule_kids">–ú–æ–∂–Ω–æ
                        —Å –¥–µ—Ç—å–º–∏</div>
                    <div class="pill" data-value="pets" onclick="togglePill(this, 'rules')" data-i18n="rule_pets">–ú–æ–∂–Ω–æ
                        —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏</div>
                </div>
                <p class="hint-text" style="font-size: 12px; color: #888; margin-top: 8px; line-height: 1.4;"
                    data-i18n="hint_occupancy">
                    –Ø —Ñ–∏–ª—å—Ç—Ä—É—é —Ç–æ–ª—å–∫–æ —Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –≥–¥–µ –∑–∞–ø—Ä–µ—Ç –ø—Ä–æ–ø–∏—Å–∞–Ω –ø—Ä—è–º–æ –≤ —Ç–µ–∫—Å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è ‚Äì —Å —Ç–∞–∫–∏–º–∏ —Ö–æ–∑—è–µ–≤–∞–º–∏
                    –º–∞–ª–æ—Ä–µ–∞–ª—å–Ω–æ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è. –ù–æ –µ—Å–ª–∏ –∑–∞–ø—Ä–µ—Ç —É–∫–∞–∑–∞–Ω —Ç–æ–ª—å–∫–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∞ –≤ —Ç–µ–∫—Å—Ç–µ –Ω–∏—á–µ–≥–æ
                    –Ω–µ—Ç, —Ç–æ —Å—Ç–æ–∏—Ç –ø—Ä–æ–±–æ–≤–∞—Ç—å. –í —Ö–æ—Ä–æ—à–∏—Ö –∫–≤–∞—Ä—Ç–∏—Ä–∞—Ö —á–∞—Å—Ç–æ –∑–∞–ø—Ä–µ—â–∞—é—Ç –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ –¥–µ—Ç–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–µ
                    –æ–±–¥—É–º—ã–≤–∞—è —ç—Ç–æ –≤—Å–µ—Ä—å–µ–∑. –ï—Å–ª–∏ —Ç—ã –Ω–µ —Ö–æ—á–µ—à—å –æ–±—â–∞—Ç—å—Å—è —Å–∞–º(–∞), –æ–±—Ä–∞—Ç–∏—Å—å –≤ –Ω–∞—à –∫–æ–Ω—Å—å–µ—Ä–∂-—Å–µ—Ä–≤–∏—Å, –º—ã –¥–µ–ª–∞–µ–º
                    —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ.
                </p>
            </div>

            <!-- 11. –†–µ–≥–∏–æ–Ω -->
            <h3 data-i18n="title_location">üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h3>
            <div class="form-group">
                <label data-i18n="label_region">–†–µ–≥–∏–æ–Ω</label>
                <select id="region-select" onchange="changeRegion()">
                    <option value="lisbon" data-i18n="option_lisbon">–õ–∏—Å—Å–∞–±–æ–Ω</option>
                    <option value="porto" data-i18n="option_porto">–ü–æ—Ä—Ç—É</option>
                </select>
            </div>

            <div class="form-group">
                <button class="action-btn" onclick="openMapDraw()" data-i18n="btn_map">üó∫ –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –Ω–∞
                    –∫–∞—Ä—Ç–µ</button>
            </div>

            <!-- 12. –í—Ä–µ–º—è –¥–æ –º–µ—Ç—Ä–æ -->
            <div class="form-group">
                <label data-i18n="label_metro">–í—Ä–µ–º—è –¥–æ –º–µ—Ç—Ä–æ</label>
                <div class="pill-group" id="metro-distance">
                    <div class="pill" data-value="5" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_5">–¥–æ 5 –º–∏–Ω</div>
                    <div class="pill" data-value="10" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_10">–¥–æ 10 –º–∏–Ω</div>
                    <div class="pill" data-value="15" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_15">–¥–æ 15 –º–∏–Ω</div>
                    <div class="pill" data-value="20" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_20">–¥–æ 20 –º–∏–Ω</div>
                    <div class="pill" data-value="25" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_25">–¥–æ 25 –º–∏–Ω</div>
                    <div class="pill" data-value="30" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_30">–¥–æ 30 –º–∏–Ω</div>
                    <div class="pill selected" data-value="any" onclick="selectOnePill(this, 'metro-distance')"
                        data-i18n="metro_any">–ù–µ –≤–∞–∂–Ω–æ</div>
                </div>
            </div>

            <!-- 13. –û–∫—Ä—É–∂–µ–Ω–∏–µ -->
            <div class="form-group">
                <label data-i18n="label_environment">–û–∫—Ä—É–∂–µ–Ω–∏–µ</label>
                <div class="pill-group" id="environment">
                    <div class="pill" data-value="park" onclick="togglePill(this, 'environment')" data-i18n="env_park">
                        –ü–∞—Ä–∫ —Ä—è–¥–æ–º</div>
                    <div class="pill" data-value="quiet" onclick="togglePill(this, 'environment')"
                        data-i18n="env_quiet">–ë–µ–∑ —à—É–º–Ω—ã—Ö –¥–æ—Ä–æ–≥ —Ä—è–¥–æ–º</div>
                </div>
            </div>

            <!-- 14. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
            <h3 data-i18n="title_notifications">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
            <div class="form-group">
                <div class="pill-group" id="notification-type">
                    <div class="pill" data-value="all" onclick="selectOnePill(this, 'notification-type')"
                        data-i18n="notify_all">–í—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ</div>
                    <div class="pill selected" data-value="new" onclick="selectOnePill(this, 'notification-type')"
                        data-i18n="notify_new">–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ</div>
                </div>
                <p class="hint-text" style="font-size: 12px; color: #888; margin-top: 5px; line-height: 1.4;"
                    data-i18n="hint_notifications">
                    –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é ¬´–í—Å–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ¬ª, —á—Ç–æ–±—ã —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–∞—à–∏–º —Ñ–∏–ª—å—Ç—Ä–∞–º.
                    –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏—è—Ö. –ï—Å–ª–∏ –≤—ã–±—Ä–∞—Ç—å ¬´–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ¬ª,
                    —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–± –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.
                </p>
            </div>

        </div>

        <!-- RESULTS TAB -->
        <div id="tab-results" class="tab-content">
            <div id="ads-container">
                <div class="loading-spinner" data-i18n="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            </div>
        </div>

        <!-- MAP TAB -->
        <div id="tab-map" class="tab-content">
            <div style="margin-bottom: 15px;">
                <p data-i18n="map_hint" style="font-size: 14px; margin: 0; color: var(--tg-theme-text-color);">
                    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ (‚¨ü) —Å–ª–µ–≤–∞ –Ω–∞ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –Ω—É–∂–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏. –í—ã –º–æ–∂–µ—Ç–µ
                    –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–ª–∞—Å—Ç–µ–π.</p>
            </div>
            <div id="map-container"
                style="height: 400px; background: #eee; width: 100%; border-radius: 8px; z-index: 1;"></div>
        </div>
    </div>

    <div class="main-button-container">
        <button id="main-btn" onclick="sendData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–∏—Å–∫</button>
    </div>

    <script src="script.js?v=20240224"></script>
</body>

</html>
